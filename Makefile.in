# The top-level Makefile that is used to build 

SUBDIRS := rt/cpp \
           util/cpp \
           modest/cpp \
           event/cpp \
           io/cpp \
           config/cpp \
           crypto/cpp \
           data/cpp \
           net/cpp \
           mail/cpp \
           sql/cpp \
           test/cpp

MAKE_DIR = $(MAKE) -j -l 10.0 -C $(dir)

.PHONY: all

all:
	@$(foreach dir,$(SUBDIRS),$(MAKE_DIR) build-directories build-objects build-libraries;)
	@$(foreach dir,$(SUBDIRS),$(MAKE_DIR) build-executables;)

clean:
	@$(foreach dir,$(SUBDIRS),$(MAKE_DIR) clean;)
	@rm -rf libs/*
