# Basic Capistrano configuration file for deploying to cluster.

# Setup all of the roles for the cluster
role :apiservers, "bobloblaw"
#, "swollengoat",  "llamalicious",  "misterf"

# GIT repository setup
default_run_options[:pty] = true
set :user, "root"

# All of the tasks follow

desc "Deploys the dbcore libraries to the cluster."
task :deploy_dbcore, :roles => :apiservers do
  put(File.read('../installers/packages/libdbcore3_@FULL_VERSION@_i386.deb'),
    "/tmp/libdbcore3_@FULL_VERSION@_i386.deb",
    :mode => 0600)
  run "dpkg -i /tmp/libdbcore3_@FULL_VERSION@_i386.deb"
  run "rm -f /tmp/libdbcore3_@FULL_VERSION@_i386.deb"
end

